<!DOCTYPE html>
<meta charset="utf-8">
<style> /* set the CSS */

.line {
  fill: none;
  stroke: steelblue;
  stroke-width: 2px;
}
</style>
<body>

  <!-- load the d3.js library -->
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script>



d3.json("Multiple line graph in v4 from JSON and draw 4.json", function(error, data) {

  //console.log(data[0]);
  //console.log(data.data.coinDataCache.BitcoinEssence);
  //console.log(data.data.coinDataCache);
  console.log(data.success);  // true
  console.log(data.message); // null
  console.log(data.messages); // null

  console.log(data.data.coinDataCache); // all coins in list
  console.log(data.data.coinDataCache.Bitcoinessence); // price data for
  console.log(data.data.coinDataCache.Bitcoinessence.trade); // price data for

 var trade_data = data.data.coinDataCache.Bitcoinessence.trade;



var count = 0;
var finaljson;
var str1;
var myObj;
var myObj2;
var arr= []; // empty arrary

 for(var k in trade_data) {
   console.log("----------------------------------------------------------------------");
   console.log("start count =" +  count);
    console.log(k, trade_data[k]);
    var kk = trade_data[k];


      console.log(Object.keys(kk)); // array of lastPrice and btcVol
      console.log(Object.keys(kk)[0]); // lastPrice
      console.log(Object.values(kk)[0]); // lastPrice value
      console.log(Object.keys(kk)[1]); // btcVol
      console.log(Object.values(kk)[1]); // btcVol value

      console.log(k);

      console.log(kk.constructor.name);

      console.log("kk  count =" +  count);
      if(count == 0) {
         str1 = '{ "date":' + '"' + k +  '", "'+ Object.keys(kk)[0] + '":""'  + Object.values(kk)[0] +   '"", "'+ Object.keys(kk)[1] + '":""'  + Object.values(kk)[1] +'" }';

         myObj2 = JSON.parse(str1);
         console.log(myObj2);
         arr.push(myObj2);

      }

      console.log("jj  count =" +  count);
      if(count > 0) {
         str1 = '{ "date":' + '"' + k +  '", "'+ Object.keys(kk)[0] + '":"'  + Object.values(kk)[0] +   '", "'+ Object.keys(kk)[1] + '":"'  + Object.values(kk)[1] +'" }';

        myObj = JSON.parse(str1);
        console.log(myObj);
        //console.log(myObj);
        arr.push(myObj);

        //myObj2.concat(myObj);

      }



      //console.log(str1);
      console.log("count =" +  count);

      count = count + 1;
      if (count > 0) {
        //break;
      }
      console.log("count =" +  count);

 }


 console.log("----------------------------------------------------------------------");
 console.log(arr);

  /*
  var count = 0;
  data.data.coinDataCache.forEach(function(d) {
    console.log("hi");
      count += 1;
    //d.Letter = d.Letter;
    //d.Freq = +d.Freq;
  });
  console.log(count);
  */
});

</script>
</body>
